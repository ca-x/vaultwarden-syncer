{{if eq (len .Cards) 0}}
<div class="empty-state">
    <div class="empty-state-icon">
        <iconify-icon icon="mdi:database-off-outline"></iconify-icon>
    </div>
    <div class="empty-state-content">
        <h3>No storage backends configured</h3>
        <p>Add your first storage backend to start backing up your Vaultwarden data</p>
        <div class="empty-state-actions">
            <button onclick="document.getElementById('storage_type').focus()" class="btn btn-primary">
                <iconify-icon icon="mdi:plus"></iconify-icon>
                Add Storage Backend
            </button>
        </div>
    </div>
</div>
{{else}}
{{range .Cards}}
<div class="storage-card" data-status="{{if .Enabled}}enabled{{else}}disabled{{end}}">
    <div class="storage-card-header">
        <div class="storage-info">
            <div class="storage-icon">
                {{if eq .Type "webdav"}}
                    <iconify-icon icon="mdi:cloud-upload" class="type-icon webdav"></iconify-icon>
                {{else if eq .Type "s3"}}
                    <iconify-icon icon="mdi:aws" class="type-icon s3"></iconify-icon>
                {{end}}
            </div>
            <div class="storage-details">
                <h3 class="storage-name">{{.Name}}</h3>
                <div class="storage-meta">
                    <span class="storage-type">{{.Type}}</span>
                    <span class="storage-status status-{{if .Enabled}}enabled{{else}}disabled{{end}}">
                        {{if .Enabled}}
                            <iconify-icon icon="mdi:check-circle"></iconify-icon>
                            Enabled
                        {{else}}
                            <iconify-icon icon="mdi:pause-circle"></iconify-icon>
                            Disabled
                        {{end}}
                    </span>
                </div>
            </div>
        </div>
        <div class="storage-actions">
            <div class="action-buttons">
                <button hx-post="/api/sync/{{.ID}}" hx-target="#result" 
                        class="btn btn-icon btn-primary" title="Sync Now"
                        {{if not .Enabled}}disabled{{end}}>
                    <iconify-icon icon="mdi:sync"></iconify-icon>
                </button>
                <button hx-get="/storage/{{.ID}}/edit" hx-target="body" 
                        class="btn btn-icon btn-secondary" title="Edit">
                    <iconify-icon icon="mdi:pencil"></iconify-icon>
                </button>
                <button hx-delete="/api/storage/{{.ID}}" hx-target="#result" 
                        hx-confirm="Are you sure you want to delete this storage backend?"
                        class="btn btn-icon btn-danger" title="Delete">
                    <iconify-icon icon="mdi:delete"></iconify-icon>
                </button>
            </div>
        </div>
    </div>
    
    <div class="storage-card-body">
        {{if .Config}}
            <div class="config-info">
                {{if eq .Type "webdav"}}
                    <div class="config-item">
                        <iconify-icon icon="mdi:server" class="config-icon"></iconify-icon>
                        <span class="config-label">Server:</span>
                        <span class="config-value">{{.Config.url}}</span>
                    </div>
                {{else if eq .Type "s3"}}
                    <div class="config-item">
                        <iconify-icon icon="mdi:server" class="config-icon"></iconify-icon>
                        <span class="config-label">Endpoint:</span>
                        <span class="config-value">{{if .Config.endpoint}}{{.Config.endpoint}}{{else}}AWS S3{{end}}</span>
                    </div>
                    <div class="config-item">
                        <iconify-icon icon="mdi:earth" class="config-icon"></iconify-icon>
                        <span class="config-label">Region:</span>
                        <span class="config-value">{{.Config.region}}</span>
                    </div>
                    <div class="config-item">
                        <iconify-icon icon="mdi:bucket" class="config-icon"></iconify-icon>
                        <span class="config-label">Bucket:</span>
                        <span class="config-value">{{.Config.bucket}}</span>
                    </div>
                {{end}}
            </div>
        {{end}}
        
        <div class="sync-status-section">
            <div class="sync-status-item">
                <div class="status-indicator status-{{.SyncStatusClass}}">
                    <iconify-icon icon="{{.SyncStatusIcon}}"></iconify-icon>
                </div>
                <div class="status-content">
                    <div class="status-text">{{.LastSyncStatus}}</div>
                    <div class="status-time">Last sync: {{.LastSync}}</div>
                    {{if .SyncError}}
                    <div class="status-error">
                        <iconify-icon icon="mdi:alert-circle"></iconify-icon>
                        {{.SyncError}}
                    </div>
                    {{end}}
                </div>
            </div>
        </div>
    </div>
    
    <div class="storage-card-footer">
        <div class="storage-stats">
            <div class="stat-item">
                <iconify-icon icon="mdi:calendar-plus" class="stat-icon"></iconify-icon>
                <span class="stat-label">Created:</span>
                <span class="stat-value">{{.Created}}</span>
            </div>
        </div>
    </div>
</div>
{{end}}
{{end}}